
## Critical Bugs (Completed)
- [x] **Image upload broken** - Cannot upload images; RLS error on localhost
  - **Fixed:** Created items storage bucket with RLS policies; uploads work on localhost and Vercel
- [x] **Sign out broken** - Clicking sign out didn't sign users out or redirect
  - **Fixed:** Removed in separate session
- [x] **Unified filter system (part 1)** - Tag pages used separate TagFeed component
  - **Fixed:** All filter pages now use unified ClientFeed; TagFeed removed
- [x] **Status page titles wrong** - All status pages showed "All Items"
  - **Fixed:** ClientFeed now uses `statusLabels` from `lib/status-icons.tsx`
- [x] **Pagination + performance** - No pagination, tag filtering slow
  - **Fixed:** Added `item_tags` indexes migration, 50 items/page pagination, Load More button
- [x] **Load More race condition** - Multiple requests fired, items out of order
  - **Fixed:** Removed circular dependency; handleLoadMore fetches directly
- [x] **Search doesn't work** - Search functionality is non-functional (merged into context-aware search)
- [x] **Cannot edit entries** - No way to add tags or edit existing items after saving
- [x] **Cannot tag entries before auto-save** - Some items automatically save before user can add tags
- [x] **Tag management** - Create, edit, delete tags from sidebar
  - [x] Replace "tag counter" in sidebar with a plus button that opens a dialog
  - [x] Tag creation dialog includes: name input, color picker
  - [x] Ability to delete tags from the sidebar (add a small X on each tag which brings up a dialog - deleting tags doesn't delete the items, just the tag)
  - [x] Drag and drop to reorder tags in sidebar
- [x] **Top-right buttons broken** - View toggle buttons in top right don't do anything
  - [x] Added masonry/uniform/list view modes
  - [x] Smooth transitions between views (fade/scale animation)
  - [x] List view shows compact horizontal rows

## Technical Debt (Completed)
- [x] **Global icon/color framework** - Centralized all icon sizes, colors, and styling constants
  - [x] Created `lib/type-icons.tsx` with NAV/ACTION/BADGE/OVERLAY icon constants
  - [x] Created `lib/status-icons.tsx` with global status colors
  - [x] Type colors: green (links), sky blue (tweets), red (images), yellow (notes), neutral (all)
  - [x] Status colors: neutral (inbox), green (done), orange (archived)
  - [x] All icons maintain colors on active nav state
- [x] **Development principles documentation** - Added "Think Globally, Never Hardcode" section to CLAUDE.md
  - [x] 4-phase workflow (Search → Refactor → Implement → Verify)
  - [x] Quick reference table for centralized patterns
  - [x] Bad vs Good examples
  - [x] Code review checklist
  - [x] CLAUDE.md sync requirement for every session
- [x] **Session close command** - Created `/byebye` command for proper session cleanup
  - [x] Auto-sync CLAUDE.md and tasks.md
  - [x] Commit and push workflow
  - [x] Edge case handling

## Architecture & DRY Refactoring (Completed - Jan 2025)
- [x] **Route groups with shared layouts** - Implemented `(auth)` and `(public)` route groups
  - Authenticated pages now share ONE layout (Sidebar + Header + auth check)
  - Public pages (login, signup, etc.) have no layout
  - Pages only need to render their content component - layout inherited from parent
  - Eliminates duplicate layout code across all pages
- [x] **React Context for UI state** - Created centralized state management without prop drilling
  - `ViewModeProvider` (`lib/context/view-mode-context.tsx`) - View mode with localStorage persistence
  - `SearchProvider` (`lib/context/search-context.tsx`) - Search state across the app
  - `SearchHeader` component integrates with SearchContext for conditional search functionality
- [x] **URL configuration centralization** - Created `lib/config/urls.ts` as single source of truth
  - `getResetPasswordUrl()`, `getEmailConfirmationUrl()`, `getAuthCallbackUrl()`
  - Eliminates hardcoded URLs throughout auth flows

## Critical Bugs (Completed - Jan 2025)
- [x] **Tag deletion not syncing** - When creating then deleting a new tag in the Add Item dialog, the tag visually disappears from the dialog but still appeared elsewhere in the app
  - **Fixed:** Tag deletion now properly syncs via dispatchTagsUpdated() event bus
- [x] **Status page icon bug** - "Move to inbox" button in Done/Archived pages showed checkmark instead of inbox/tray icon
  - **Fixed:** Ensured global icon source from lib/status-icons.tsx is used consistently
- [x] **Can't create new tags via Add Item** - Could add new tags via Edit Item but not via New Item; dialog auto-submitted instead of letting user create tag
  - **Fixed:** Tag selector now properly handles inline tag creation from Add Item dialog
- [x] **Icon colors gone in items** - Type icons not showing their colors in item cards
  - **Fixed:** Type colors from lib/type-icons.tsx now properly applied to item card icons

## Code Review & Performance Fixes (Completed - Jan 2025)
- [x] **Code review and performance optimization** - Comprehensive audit and fixes
  - **Fixed:** Input validation on API routes (VALID_CONTENT_TYPES constant)
  - **Fixed:** Replaced all alert() calls with toast notifications using sonner
  - **Fixed:** Replaced confirm() with shared DeleteConfirmDialog component
  - **Fixed:** Search wildcard sanitization (escape % and _ characters)
  - **Fixed:** Duplicate delete dialogs in sidebar and tag-manager-dialog
  - **Fixed:** React.memo on ItemCard for performance
  - **Fixed:** Memoized ViewMode context value
  - **Fixed:** useCallback on Feed handlers (handleStatusChange, handleDelete, handleItemUpdated)
  - **Fixed:** useMemo for viewContent to prevent unnecessary re-renders
  - **Fixed:** Hydration mismatch in ViewModeProvider (deferred localStorage read)
  - **Fixed:** Hooks order violation in Feed (moved useMemo before early returns)
  - **Fixed:** View transition delay (added onTransitionRequest callback)
  - **Added:** lib/storage-keys.ts for centralized localStorage constants
  - **Added:** REMAINING_TASKS.md documenting deferred work
